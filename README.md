# hh_auto_apply

## Описание проекта
`hh_auto_apply` — это Python-скрипт для автоматизации процесса отклика на вакансии на сайте hh.ru. Он разработан для упрощения рутинных задач поиска и подачи заявок, позволяя пользователю сосредоточиться на более важных аспектах трудоустройства. Скрипт использует `Playwright` для взаимодействия с веб-интерфейсом, `SQLite` для отслеживания просмотренных вакансий и `dotenv` для управления конфигурацией.

## Возможности
*   Автоматический поиск вакансий по заданным критериям (ключевые слова, регионы, удаленная работа).
*   Отслеживание уже просмотренных и откликнутых вакансий для предотвращения повторных действий.
*   Поддержка сопроводительных писем.
*   Возможность выбора конкретного резюме для отклика.
*   Режим "сухого запуска" (dry-run) для тестирования без реальной отправки откликов.
*   Сохранение информации об откликнутых вакансиях в CSV-файл.
*   Создание скриншотов в случае ошибок или для отладки.

## Установка
Для установки и запуска проекта выполните следующие шаги:

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Zakirov-Yuriy/hh_auto_apply.git
    cd hh_auto_apply
    ```

2.  **Создайте и активируйте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv .venv
    # Для Windows:
    .venv\Scripts\activate
    # Для Linux/macOS:
    source .venv/bin/activate
    ```

3.  **Установите зависимости Python:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Установите браузеры для Playwright:**
    ```bash
    playwright install
    ```

## Конфигурация
Проект конфигурируется через файл `.env` в корневой директории. Создайте файл `.env` и заполните его следующими переменными:

```dotenv
HH_SEARCH_QUERY="python разработчик"
HH_REGION_IDS="1,2" # ID регионов, например, Москва и Санкт-Петербург
HH_REMOTE_ONLY="true" # "true" для удаленной работы, "false" для всех
HH_MAX_APPLIES="200" # Максимальное количество откликов
HH_MIN_SLEEP="3" # Минимальная задержка между действиями (секунды)
HH_MAX_SLEEP="7" # Максимальная задержка между действиями (секунды)
HH_PERSIST_DIR=".hh_user" # Директория для сохранения данных сессии Playwright
HH_SCREENSHOTS_DIR="screenshots" # Директория для сохранения скриншотов
HH_DB_PATH="hh_seen.sqlite" # Путь к базе данных SQLite для отслеживания вакансий
HH_SEEN_TTL_DAYS="14" # Срок хранения информации о просмотренных вакансиях (дни)
HH_RESUME_TITLE_MATCH="Python разработчик" # Маска для выбора резюме (нижний регистр)
HH_FAIL_IF_RESUME_NOT_FOUND="true" # Останавливать скрипт, если резюме не найдено
HH_REQUIRE_COVER_LETTER="true" # Требовать сопроводительное письмо
HH_MAX_PAGES="100" # Максимальное количество страниц поиска для сканирования
HH_VACANCIES_CSV="vacancies.csv" # Файл для сохранения откликнутых вакансий
```

## Использование
После установки и настройки `.env` запустите скрипт через `run.py`:

```bash
python run.py
```

**Аргументы командной строки:**
*   `--headless`: Запускает браузер в фоновом режиме (без UI).
*   `--dry-run`: Выполняет сканирование без фактической отправки откликов.
*   `--verbose`: Включает подробные логи.
*   `--query "ваш запрос"`: Переопределяет `HH_SEARCH_QUERY` из `.env`.

Пример запуска в режиме "сухого запуска" с подробными логами:
```bash
python run.py --dry-run --verbose
```

## Сопроводительное письмо
Создайте файл `cover_letter.txt` в корневой директории проекта и вставьте в него текст вашего сопроводительного письма. Скрипт будет использовать этот текст при отправке откликов.

## Тестирование
Проект содержит unit-тесты для проверки корректности работы ключевых функций. Для запуска тестов:

1.  **Установите зависимости для разработки:**
    ```bash
    pip install -r requirements-dev.txt
    ```

2.  **Запустите тесты:**
    ```bash
    python -m pytest
    ```
