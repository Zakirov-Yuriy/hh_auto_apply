# hh_auto_apply

## Описание проекта
`hh_auto_apply` — это Python-скрипт для автоматизации процесса отклика на вакансии на сайте hh.ru. Он разработан для упрощения рутинных задач поиска и подачи заявок, позволяя пользователю сосредоточиться на более важных аспектах трудоустройства.

Ключевая особенность проекта — **интеграция с AI для генерации персонализированных сопроводительных писем** для каждой вакансии на основе её описания.

Скрипт использует `Playwright` для взаимодействия с веб-интерфейсом, `SQLite` для отслеживания просмотренных вакансий и `dotenv` для гибкого управления конфигурацией.

## Возможности
*   **AI-генерация сопроводительных писем:** Автоматическое создание уникальных писем для каждой вакансии с помощью моделей ИИ через OpenRouter.
*   **Гибкая настройка AI:** Возможность легко менять AI-модель и редактировать инструкции (промпт) для генерации.
*   **Автоматический поиск:** Поиск вакансий по заданным критериям (ключевые слова, регионы, удаленная работа).
*   **Отслеживание откликов:** Ведение базы данных `SQLite` для предотвращения повторных откликов.
*   **Выбор резюме:** Возможность указать, какое именно резюме использовать для отклика.
*   **Безопасный режим:** "Сухой запуск" (`dry-run`) для тестирования без реальной отправки откликов.
*   **Отчетность:** Сохранение информации об успешных откликах в CSV-файл.
*   **Отладка:** Создание скриншотов в случае ошибок.

## Установка
1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Zakirov-Yuriy/hh_auto_apply.git
    cd hh_auto_apply
    ```

2.  **Создайте и активируйте виртуальное окружение (рекомендуется):**
    ```bash
    python -m venv .venv
    # Для Windows:
    .venv\Scripts\activate
    # Для Linux/macOS:
    source .venv/bin/activate
    ```

3.  **Установите зависимости:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **Установите браузеры для Playwright:**
    ```bash
    playwright install
    ```

## Конфигурация
Проект настраивается через файл `.env`. Скопируйте `example.env` (если он есть) или создайте `.env` вручную и заполните его.

### Основные настройки
```dotenv
HH_SEARCH_QUERY="python разработчик"
HH_REGION_IDS="1,2" # ID регионов (Москва, Санкт-Петербург)
HH_REMOTE_ONLY="true"
HH_MAX_APPLIES="100"
HH_RESUME_TITLE_MATCH="Python разработчик" # Маска для выбора резюме
# ... и другие основные настройки ...
```

### Настройка AI для сопроводительных писем
1.  **Включите AI-генерацию:**
    ```dotenv
    USE_AI_COVER_LETTER="true"
    ```

2.  **Получите и вставьте API-ключ:**
    *   Зарегистрируйтесь на [OpenRouter.ai](https://openrouter.ai/).
    *   Перейдите в раздел [Keys](https://openrouter.ai/keys) и скопируйте ваш ключ.
    *   Вставьте его в `.env`:
    ```dotenv
    OPENROUTER_API_KEY="sk-or-v1-..."
    ```

3.  **Выберите AI-модель:**
    Укажите модель, которую хотите использовать. Рекомендуется начать с проверенных бесплатных вариантов.
    ```dotenv
    # Рекомендуемые бесплатные модели:
    # - mistralai/mistral-7b-instruct:free
    # - google/gemma-7b-it:free
    AI_MODEL="mistralai/mistral-7b-instruct:free"
    ```

4.  **Настройте промпт (инструкцию для AI):**
    *   Откройте файл `prompt.txt`.
    *   Отредактируйте текст, чтобы задать стиль, язык и содержание писем, которые будет генерировать AI.
    *   **Важно:** Не удаляйте плейсхолдер `{job_description}`, на его место подставляется описание вакансии.
    *   Путь к этому файлу указывается в `.env`:
    ```dotenv
    AI_PROMPT_PATH="prompt.txt"
    ```

## Использование
После установки и настройки запустите скрипт:
```bash
python run.py
```

**Аргументы командной строки:**
*   `--headless`: Запуск браузера в фоновом режиме.
*   `--dry-run`: Сканирование без отправки откликов.
*   `--verbose`: Подробные логи.
*   `--query "ваш запрос"`: Временно переопределяет `HH_SEARCH_QUERY`.

Пример:
```bash
python run.py --dry-run --verbose --query "Golang developer"
```

## Тестирование
1.  **Установите dev-зависимости:**
    ```bash
    pip install -r requirements-dev.txt
    ```
2.  **Запустите тесты:**
    ```bash
    python -m pytest
